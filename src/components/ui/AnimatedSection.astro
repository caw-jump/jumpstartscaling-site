---
export interface Props { delay?: number }
const { delay = 0 } = Astro.props
---
<section class="animated-section opacity-0 translate-y-10 transition-all duration-1000 ease-out" style={`transition-delay: ${delay}ms`}>
  <slot />
</section>
<script>
  function initAnimatedSections() {
    const observer = new IntersectionObserver((entries) => {
      entries.forEach(entry => {
        if (entry.isIntersecting) {
          entry.target.classList.remove('opacity-0', 'translate-y-10');
          entry.target.classList.add('opacity-100', 'translate-y-0');
          observer.unobserve(entry.target);
        }
      });
    }, { threshold: 0.1 });
    document.querySelectorAll('.animated-section').forEach(el => observer.observe(el));
  }
  if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', initAnimatedSections);
  } else {
    initAnimatedSections();
  }
  document.addEventListener('astro:page-load', initAnimatedSections);
</script>
